---
title: IoT 智能硬件与手机的三种连接方式
date: 2018-07-10
categories:
- IoT
---

目标：研究loT设备与手机的连接方式（连接流程和原理）
loT设备：智能插线板，智能音响等智能硬件
手机：运行在手机上的App

参考：腾讯的AirKiss、华为的HiLink

-----

>前言：人机互联是2.0，而3.0就是IoT(Internet OF things ，万物互联，今天所有能想到的东西，灯、插座、汽车、家电、集装箱、大轮船等等都可以变成智能手机，都会变成一部手机，样子不像手机，实际上是一个手机的智能系统，7x24小时跟互联网连起来，这个会产生新的工业革命。

![IoT](https://upload-images.jianshu.io/upload_images/3407530-578a554c7870461b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

- 1、手机连接智能硬件的软ap，再配置
原理：手机连接上了智能硬件后，手机app和智能硬件就可以建立socket通信，然后两者之间就可以进行数据的交互，不管是设置还是传输都没有问题了。接着手机app配置智能硬件需要连接的路由的ssid和密码，然后智能硬件就可以自行连接路由了。再接着，手机连接路由，智能硬件也连接着路由，至此以后两者就可以交互了。如果加上互联网上的服务器的话。手机通过4g网络也可以控制智能硬件。

- 2、 神奇的smart config
原理：首先app端发送带有ssid和密码的经过加密的udp广播包。其次wifi模块拥有monitor模式，也就是所谓的监听模式，可以抓取空中的包，当然，wifi必须扫描出当前的可以连接的所有路由处于哪个信道，并对这些信道分别监听，然后收到了经过加密的app端发送的包后，解密出来就是ssid和密码，接着可以通过wpa_supplicant进程来进行连接路由。

- 3、声波配置
原理：手机放出经过编码加密的声音，智能硬件通过麦克风录音，解码解密，然后配置成功。接着就和上述基本类似
